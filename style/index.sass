@use "../style/base"

$light-gradient: linear-gradient(30deg, mix(base.$gray-900, base.$color-primary-light, 80%) 0%, mix(base.$gray-950, base.$color-primary-light, 80%) 90%)
$dark-gradient: linear-gradient(120deg, mix(base.$gray-000, base.$color-primary-light, 85%) 0%, mix(base.$gray-100, base.$color-primary-light, 85%) 90%)

html
    animation: fadeIn 0.6s forwards ease-in
    background: light-dark(base.$gray-950,base.$gray-200)
    transition-property: background
    transition-duration: 0.3s

html[data-darkmode="true"]
    color-scheme: dark
    .card-list__items-container
        background: $dark-gradient
    .detail-card__content-container
        background: $dark-gradient
    #card-list__items-cast-members
        background-color: base.$gray-100

html[data-darkmode="false"]
    color-scheme: light

body
    position: relative
    min-height: 100dvh
    color: light-dark(base.$color-primary-dark,base.$color-primary-light)
    font: base.$text-body-1
    padding: 0 0 base.$unit-6x

button
    @include base.button-base

.content-main
    @include base.fxcol
    gap: base.$unit-2x
    margin: 0 base.$unit-2x

.movie__original-title
    white-space: nowrap
    font-size: 0.75rem
    color: light-dark(base.$gray-500,base.$gray-700)

site-header
    display: grid
    height: base.$unit-8x
    align-items: center
    padding: 0 base.$unit-3x

    .site-header__back-link, .site-header__back-link-icon
        color: light-dark(base.$color-primary-dark,base.$color-primary-light)
    *
        width: fit-content
        grid-area: 1/1

    h1
        align-self: center
        justify-self: center
        font: base.$text-headline

    dark-mode-toggle
        display: inline-flex
        gap: base.$unit-05x
        align-items: center
        align-self: center
        justify-self: right
        input
            -webkit-appearance: none
            -moz-appearance: none
            appearance: none
            position: relative
            font-size: inherit
            width: 2em
            height: 1em
            box-sizing: content-box
            border: 2px solid
            border-radius: 1em
            vertical-align: text-bottom
            margin: auto
            color: inherit
            cursor: pointer

        input:active
            opacity: 0.6

        input:before
            content: ""
            position: absolute
            top: 50%
            left: 0
            transform: translate(0, -50%)
            box-sizing: border-box
            width: 0.7em
            height: 0.7em
            margin: 0 0.15em
            border: 1px solid
            border-radius: 50%
            background: currentcolor
            transition: 300ms left

        input:checked:before
            left: 1em

.site-header--details
    position: relative
    z-index: 100
    color: base.$color-primary-light
    background: linear-gradient(0deg, transparent 0%, rgba(mix(base.$color-primary-dark, base.$gray-100, 25%),0.66) 100%)
    .site-header__back-link, .site-header__back-link-icon
        color: base.$color-primary-light

clickable-image
    isolation: isolate

    .clickable-image__wrapper
        width: 100%
        position: relative
        aspect-ratio: 1 / 1.45
        margin-bottom: base.$unit-2x
        transition-property: scale
        transition-duration: 0.5s

        img
            position: relative
            border-radius: base.$unit-1x
            height: 100%
            width: 100%
            object-fit: cover
            display: block
            z-index: 1

        .clickable-image__shadow-wrapper
            position: absolute
            height: base.$unit-4x
            width: 100%
            bottom: 0
            transform: translateY(8px) scaleY(-1)
            overflow: hidden
            filter: blur(10px)
            opacity: 0.75
            z-index: -10
            transition-property: opacity
            transition-duration: 0.3s

            img
                position: relative
                object-fit: fill
                width: 100%
                height: base.$unit-2x
                transform: scaleX(2)
                transform-origin: center bottom
                pointer-events: none

        &:focus-within, &:hover
            scale: 1.025
            .clickable-image__shadow-wrapper
                opacity: 0.5

section-subheading
    .section-subheading__hgroup
        display: flex
        justify-content: space-between
        align-items: center
        padding: 0 base.$unit-1x

    .section-subheading__hgroup--details
        padding: 0

    .section-subheading__title
        font: base.$text-subtitle-1
        &--collections
            font-size: 0.8rem

movie-rating
    .movie-rating

        &__rating
            display: inline-flex
            width: 100%
            align-items: center
            gap: base.$unit-05x
            color: light-dark(base.$gray-300,base.$gray-600)
        &__rating-score
            font-weight: 700
            font-style: normal
        &__star-icon
            color: base.$color-accent
        &__scale
            display: inline-flex
            white-space: nowrap
        &__vote-count
            margin-left: auto
            font: base.$text-body-1

movie-card
    gap: base.$unit-1x
    position: relative
    height: 100%

    scroll-snap-align: center

    .movie-card
        &__rating
            display: inline-flex
            width: 100%
            align-items: center
            gap: base.$unit-05x
            color: base.$gray-300
        &__rating-score
            font-weight: 700
            font-style: normal
        &__star-icon
            color: base.$color-accent
        &__vote-count
            margin-left: auto
            font: base.$text-body-1
        &__movie-title
            font: base.$text-subtitle-2
            transition-property: color
            transition-duration: 0.3s
        &__runtime
            display: inline-flex
            gap: base.$unit-05x
            align-items: center
            font: base.$text-body-2
            color: light-dark(base.$gray-300,base.$gray-600)
    .movie-card__info-container
        @include base.fxcol
        gap: base.$unit-1x
        width: 100%
    &[vertical]
        @include base.fxcol
    &[horizontal]
        @include base.fxrow
        width: 100%
        max-width: 24rem
        clickable-image
            height: 100%
        .clickable-image__wrapper
            height: 100%
    .clickable-image:hover,.clickable-image:focus-within
        ~.movie-card__info-container .movie-card__movie-title
            color: base.$color-primary-mid

card-list
    @include base.fxcol
    position: relative
    gap: base.$unit-1x
    margin-bottom: base.$unit-3x

    .card-list
        &__items-container
            display: grid
            padding: base.$unit-2x
            gap: base.$unit-2x
            position: relative
            border-radius: base.$unit-2x
            background-color: light-dark(base.$gray-950,base.$gray-100)
            border: 1px solid light-dark(base.$gray-900,rgba(base.$gray-300,33%))
            background: $light-gradient
            transition-property: background
            transition-duration: 0.3s

            &[horizontal]
                @include base.infite-list-horizontal($grid-item-width: 14rem)
                scroll-behavior: smooth
                scroll-snap-type: x mandatory
            &[vertical]
                @include base.infite-list-vertical($grid-item-width: 18rem)

        &__buttons-container
            @include base.fxrow
            pointer-events: none
            position: absolute
            z-index: 100
            width: 100%
            justify-content: space-between
            padding: 0 0.75rem
            top: 45%
            button
                pointer-events: auto
                font-size: 0.75rem
                width: 2rem
                height: 2rem
                background-color: rgba(base.$color-primary-light,0.75)
                color: base.$color-primary-dark
                box-shadow: base.$box-shadow-2x
                border: 1px solid base.$black-tint-100

#card-list__items-cast-members
    @include base.infite-list-horizontal($grid-item-width: 10rem)
    background: base.$gray-950
    transition-property: background
    transition-duration: 0.5s

genre-tags
    .genre-tags
        &__list
            @include base.fxrow
            gap: base.$unit-05x
            flex-wrap: wrap
        &__item
            display: inline-flex

    .genre-tags__link
        @include base.reset-links
        width: 100%
        padding: base.$unit-025x base.$unit-1x
        background-color: light-dark(base.$color-primary-light, base.$color-primary-mid)
        color: light-dark(base.$color-primary-mid, base.$color-primary-dark)
        box-shadow: base.$box-shadow-2x
        border-radius: base.$unit-2x
        border: 1px solid rgba(base.$gray-500,33%)
        font: base.$text-caption

        :visited
            color: inherit

nav-footer
    @include base.fxrow
    justify-content: space-evenly
    align-items: center

    width: 100%
    max-width: base.$max-width-page
    height: 3rem
    background-color: light-dark(rgba(base.$gray-900,0.5),rgba(base.$gray-100,0.5))
    backdrop-filter: blur(base.$unit-8x)
    border-radius: base.$unit-2x base.$unit-2x 0 0
    border: 1px solid light-dark(base.$gray-800,base.$black-tint-100)
    box-shadow: 0rem base.$unit-1x*-1 base.$unit-2x base.$black-tint-100

    position: fixed
    bottom: 0
    left: 50%
    transform: translate(-50%, 0)

    .nav-footer__nav-link
        width: 4rem
        text-align: center
        color: light-dark(base.$gray-500,base.$gray-800)
        font-size: 1.25rem
        border: none
        .site-footer__favorites-link
            font-size: 1rem

        &.nav-current-location
            color: light-dark(base.$color-primary-dark,base.$color-primary-mid)

detail-backdrop
    display: block
    .detail-backdrop__backdrop-container
        width: 100%
        position: relative
        .detail-backdrop__backdrop-img
            display: block
            object-fit: cover
            width: 100%
            max-height: 24rem
        .detail-backdrop__play-button-container
            @include base.fxcol
            gap: base.$unit-1x
            align-items: center

            position: absolute
            transform: translate(-50%, -50%)
            left: 50%
            top: 75%

        .detail-backdrop__play-button
            min-width: 2rem
            min-height: 2rem
            background: base.$color-primary-light
            border-color: base.$black-tint-100
            color: base.$color-primary-dark
            font-size: 1rem
            box-shadow: 0 0 base.$unit-2x base.$unit-1x rgba(base.$color-primary-dark,0.4)

        .detail-backdrop__play-button-text
            color: base.$gray-950
            font: base.$text-body-1
            font-weight: 700
            text-shadow: 0 0 base.$unit-1x rgba(base.$color-primary-dark,0.6)

    .detail-backdrop__trailer-modal
        width: 100%
        background-color: transparent
        border: none
        position: relative
        .detail-backdrop__video
            display: none
        &::backdrop
            background-color: rgba(mix(base.$color-primary-dark, base.$gray-100, 25%),0.5)
            backdrop-filter: blur(base.$unit-1x)
        &:popover-open
            width: 100dvw
            height: 100dvh
            display: grid
            grid-template-rows: auto 1fr
            .detail-backdrop__video
                display: block
                width: 100%
                height: 100%
                padding: 0
                margin: 0
                border: none
            .detail-backdrop__close-button-container
                @include base.fxrow
                background: linear-gradient(180deg, transparent 0%, base.$gray-000 100%)
                padding: base.$unit-1x
                width: 100%
                justify-content: right
                .detail-backdrop__close-button
                    position: relative
                    color: base.$gray-950
                    border-color: base.$gray-950

detail-card
    .detail-card
        height: 100%
        position: relative
        &__content-container
            @include base.fxcol
            height: 100%
            gap: base.$unit-2x
            transform: translateY(- base.$unit-2x)
            position: relative
            border-radius: base.$unit-2x
            background-color: base.$gray-950
            border: 1px solid light-dark(base.$gray-900,base.$gray-100)
            background: $light-gradient
            transition-property: background
            transition-duration: 0.3s
            padding: base.$unit-2x base.$unit-2x 0
        &__movie-title
            font: base.$text-headline
        &__meta-information
            @include base.fxcol
            gap: base.$unit-2x
            max-width: 20rem
        &__movie-description-section
            @include base.fxcol
            gap: base.$unit-05x
            max-width: 90ch
        &__movie-description-text
            font: base.$text-body-1
            color: light-dark(base.$gray-500,base.$gray-800)
        &__cast-item
            .clickable-image:hover,.clickable-image:focus-within
                ~.detail-card__cast-name
                    color: base.$color-primary-mid
        &__cast-name
            font: base.$text-subtitle-3
            transition-property: color
            transition-duration: 0.3s
        &__cast-role
            font: base.$text-body-1
        &__cast-as
            color: base.$gray-500

.content-details
    position: relative
    top: -(base.$unit-8x)
    margin-bottom: -(base.$unit-8x)

detail-meta-list
    .detail-meta-list
        &__list
            display: grid
            grid-template-columns: 1fr 1fr 1fr
            font: base.$text-body-1
        &__meta-item-title
            color: base.$gray-600
            font-weight: 700
            font-style: normal
            margin-bottom: base.$unit-025x
        &__meta-item-value
            color: light-dark(base.$color-primary-dark, base.$gray-950)

/* Portrait orientation */
@media screen and (orientation: portrait)
    .detail-backdrop__trailer-modal:popover-open
        width: 100dvw
        height: 100dvh

/* Landscape orientation */
@media screen and (orientation: landscape)
    .detail-backdrop__trailer-modal:popover-open
        width: 100dvw
        height: 100dvh
